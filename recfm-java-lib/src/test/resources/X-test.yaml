packageName: com.example.sysj.test

interfaces:
  - &TransactionArea
    name: ITransactionArea
    length: 12
    fields:
      - !Abc { name: transId   , at:  1, len: 9 }
      - !Num { name: esitoAgg  , at: 10, len: 1 }
      - !Num { name: esitoCompl, at: 11, len: 1 }
      - !Val { val: "\n"       , at: 12, len: 1 }
      
  - &MessageArea
    name: IMessageArea
    length: 100
    fields:
      - !Abc { name: cdMsgId   , at:  13, len:  8 }
      - !Num { name: versMsg   , at:  21, len:  4 }
      - !Abc { name: cdInterno1, at:  25, len:  1 }
      - !Num { name: abiEmitt  , at:  26, len:  5 }
      - !Abc { name: cdInterno2, at:  31, len:  1 }
      - !Abc { name: cdInterno3, at:  32, len:  1 }
      - !Abc { name: cdUtente  , at:  33, len:  8 }
      - !Abc { name: abi       , at:  41, len:  5 }
      - !Abc { name: cdSegm1   , at:  46, len:  5 }
      - !Abc { name: cdSegm2   , at:  51, len:  5 }
      - !Abc { name: tsMsg     , at:  56, len: 26 }
      - !Abc { name: areaCode  , at:  82, len: 30 }
      - !Val { val: "\n"       , at: 112, len:  1 }

  - &SegmentArea
    name: ISegmentArea
    length: 11
    fields:
      - !Abc { name: cdSegmento , at: 113, len: 8 }
      - !Num { name: esitoAgg   , at: 121, len: 1 }
      - !Num { name: esitoCompl , at: 122, len: 1 }
      - !Val { val: "\n"        , at: 123, len: 1 }

  - &Date
    name: IData
    length: 10
    fields:
      - !Num { name: anno       , at: 23, len: 4 }
      - !Fil { chr: '-'         , at: 27, len: 1 }
      - !Num { name: mese       , at: 28, len: 2 }
      - !Fil { chr: '-'         , at: 30, len: 1 }
      - !Num { name: giorno     , at: 31, len: 2 }

  - &Area51
    name: IArea51
    length: 32
    fields:
      - !Abc { name: cdSegmento1 , at:   1, len: 8 }
      - !Num { name: esitoAgg1   , at:   9, len: 2 }
      - !Emb { src: *TransactionArea, at:  11, len: 12  }
#      - !GRP { name: areaTra    , at:  11, len: 12, as: *TransactionArea }
      - !Grp { name: data       , at:  23, len: 10, fields: [
        !Num { name: anno       , at: 23, len: 4 },
        !Fil {                    at: 27, len: 1 },
        !Num { name: mese       , at: 28, len: 2 },
        !Fil {                    at: 30, len: 1 },
        !Num { name: giorno     , at: 31, len: 2 },
      ] }

  - &Area52
    name: IArea52
    length: 30
    fields:
      - !Occ { name: data      , at:  23, len: 10, x: 3, fields: [
        !Num { name: anno       , at: 23, len: 4 },
        !Fil {                    at: 27, len: 1 },
        !Num { name: mese       , at: 28, len: 2 },
        !Fil {                    at: 30, len: 1 },
        !Num { name: giorno     , at: 31, len: 2 },
      ] }


classes:
  - name: KDate
    length: 10
    fields:
      - !Emb { src: *Date, at:   1, len:  10 }

  - name: B280v2xReq
    length: 19324
    fields:
#      - !GRP { name: messageArea    , at:   1, len: 100, proxy: *MessageArea }
#      - !GRP { name: transactionArea, at:   1, len:  12, as: *TransactionArea }
      - !Emb { src: *TransactionArea, at:   1, len:  12 }
      - !Emb { src: *MessageArea    , at:  13, len: 100 }
      - !Fil {                        at: 113, len:   1 }
#      - !GRP { name: messageArea    , at:  14, len: 100, as: *MessageArea }
      - !GRP { name: SegmentArea    , at: 114, len:  11, as: *SegmentArea }
      - !Fil {                        at: 125, len: 19200 }

  - name: Nevada
    length: 150
    fields:
      - !GRP { name: area51, at: 1, len: 32, as: *Area51 }
      - !OCC { name: lastThree, at: 33, len: 10, x: 3, as: *Date }
#      - !Fil {                 at: 33, len: 30 }
      - !GRP { name: area52, at: 63, len: 30, as: *Area52 }
      - !Grp { name: documento   , at:  93, len: 40, fields: [
        !Abc { name: numero      , at: 93, len: 16 },
        !Emb { src: *Date        , at: 109, len: 10 },
        !Fil {                    at: 119, len: 14 }
      ] }
      - !Fil { at: 133, len: 18 }
